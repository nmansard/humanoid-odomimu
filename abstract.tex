% !TEX root = main.tex
%
%
Location of pedestrian in indoor environment remains an open problem.
A cheap and reliable sensor in this context is the inertial measurement units (IMU), carried by the pedestrian while he/she is walking.
However, due to the bias of both the accelerometer and the gyroscope, integrating directly the inertial measurements leads to tremendous drift, as the state of the system (position, orientation, velocity, bias) is not fully observable. 
In this paper, we consider the specific case of a foot-mounted IMU.
We exploit specific prior knowledges (foot landing at zero velocity) in order to make the full state of the IMU observable.
The inertial measurements and these prior knowledges are gathered in a graphical model (a factor graph), and are exploited to build a maximum-likelihood estimator.
The technical difficulty is to handle the size of the graph such that it is tractable in a limited time window, that we do by relying on the pre-integration technique.
In that existing framework, our contributions are to reformulate the pre-integration method using quaternions while giving a simpler algebraic formulation, and to apply this method for estimating the human foot-pose during walking.
We validate these concepts on several long-range trajectories capture with human subject and compare the results with ground-truth measurements (coming from a motion capture system) and previous results of the state of the art.
%We show that our method is able to reconstruct its trajectory under some conditions.



%% In this paper, a graphical representation approach is presented to integrate 
%% IMU measurement on an augmented human. Although state estimators using both
%% informations \cite{Johnson:jof:2016,Fallon:ichr:2014} have been already proposed, this method has several additional interests.
%% First it is allowing to estimate bias and initial position of the IMU thanks to the graph
%% approach. Second the concept has been extensively used in the SLAM community and integrating 
%% other measurements such as laser, range image and so on can be done in a coherent mathematical framework.
%% The technical difficulty is to handle the size of the graph such that it is tractable in a limited window.
%% It was proposed in \cite{forster2015imu} to pre-integrate the most frequent data which are given by the IMU.
%% In this paper we propose a detailed derivation of this pre-integration using quaternion instead
%% of rotation matrices leading not only to faster computation and smaller memory foot-print,
%% but also to a more comprehensible pre-integration data to which we can give a physically coherent interpretation.
%% We validate these concepts by estimating the trajectory of the foot of a human agent during walking,
%% and show that we are able to reconstruct its trajectory under some conditions.
